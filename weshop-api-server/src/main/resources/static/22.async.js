(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"8lVg":function(e,t,a){e.exports={tableList:"antd-pro\\pages\\-user\\-user-list-tableList",tableListOperator:"antd-pro\\pages\\-user\\-user-list-tableListOperator",tableListForm:"antd-pro\\pages\\-user\\-user-list-tableListForm",submitButtons:"antd-pro\\pages\\-user\\-user-list-submitButtons"}},O6Xw:function(e,t,a){"use strict";var l=a("xK3H"),r=a("3rQ3");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=l(a("dnxz"));a("fhlT");var n=l(a("kXZy"));a("/26P");var u=l(a("aYvq"));a("1pPU");var s=l(a("KjZ1"));a("Lzml");var i=l(a("vpm+"));a("mKhK");var o=l(a("iW5v"));a("Ktq0");var c=l(a("fL5V"));a("fThj");var f=l(a("cYEd")),m=l(a("SeLb")),p=l(a("Sx57")),h=l(a("4zp0")),b=l(a("iVWQ")),E=l(a("lF+r")),v=l(a("PApH"));a("XFd2");var g=l(a("33fr"));a("9TwZ");var y=l(a("wOVV"));a("/MhY");var C=l(a("w0+5"));a("E2ON");var w=l(a("jjSt"));a("Q3sr");var F,V,k,L,S,x=l(a("9NP+")),M=r(a("6cB7")),D=a("LneV"),O=l(a("I9Uw")),U=l(a("CkN6")),j=l(a("zHco")),I=l(a("8lVg")),q=x.default.Item,R=w.default.Option,N=x.default.create()(function(e){var t=e.modalVisible,a=e.form,l=e.handleCreateUser,r=e.handleModalVisible,d=e.gender,n=e.userLevel,u=function(){a.validateFields(function(e,t){e||(a.resetFields(),l(t))})};return M.default.createElement(g.default,{destroyOnClose:!0,title:"\u65b0\u5efa\u7528\u6237",visible:t,onOk:u,onCancel:function(){return r()}},M.default.createElement(q,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7528\u6237\u540d"},a.getFieldDecorator("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e09\u4e2a\u5b57\u7b26\u7684\u7528\u6237\u540d\uff01",min:3}]})(M.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165"}))),M.default.createElement(q,{labelCol:{span:5},wrapperCol:{span:15},label:"\u624b\u673a\u53f7"},a.getFieldDecorator("mobile",{rules:[{required:!0,message:"\u4e0d\u662f\u6709\u6548\u7684\u624b\u673a\u53f7\uff01",len:11}]})(M.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165"}))),M.default.createElement(q,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5bc6\u7801"},a.getFieldDecorator("password",{rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4f4e\u4e8e\u516d\u4f4d\u6570\uff01",min:6}]})(M.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165"}))),M.default.createElement(q,{labelCol:{span:5},wrapperCol:{span:15},label:"\u6027\u522b"},a.getFieldDecorator("gender",{rules:[{required:!0,message:"\u6027\u522b\u4e0d\u80fd\u4e3a\u7a7a\uff01"}]})(M.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},Object.keys(d).map(function(e){return M.default.createElement(R,{key:e},d[e])})))),M.default.createElement(q,{labelCol:{span:5},wrapperCol:{span:15},label:"\u751f\u65e5"},a.getFieldDecorator("birthday")(M.default.createElement(y.default,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u751f\u65e5"}))),M.default.createElement(q,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7528\u6237\u7b49\u7ea7"},a.getFieldDecorator("userLevelId",{rules:[{required:!0,message:"\u9700\u8981\u7528\u6237\u7b49\u7ea7\uff01"}]})(M.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},Object.keys(n).map(function(e){return M.default.createElement(R,{key:e},n[e])})))))}),P=(F=x.default.create(),F(V=function(e){function t(e){var a;return(0,p.default)(this,t),a=(0,b.default)(this,(0,E.default)(t).call(this,e)),a.state={formVals:(0,m.default)({},e.values)},a.formLayout={labelCol:{span:5},wrapperCol:{span:15}},a}return(0,v.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.updateModalVisible,l=e.handleUpdate,r=e.handleUpdateModalVisible,d=e.gender,n=e.userLevel,u=this.state.formVals,s=this.formLayout,i=s.labelCol,o=s.wrapperCol,c=function(){t.validateFields(function(e,t){if(!e){var a=(0,m.default)({},u,t);l(a)}})};return M.default.createElement(g.default,{destroyOnClose:!0,title:"\u4fee\u6539\u7528\u6237",visible:a,onOk:c,onCancel:function(){return r()}},M.default.createElement(q,{labelCol:i,wrapperCol:o,label:"\u7528\u6237\u540d"},t.getFieldDecorator("username",{initialValue:u.username,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e09\u4e2a\u5b57\u7b26\u7684\u7528\u6237\u540d\uff01",min:3}]})(M.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165"}))),M.default.createElement(q,{labelCol:i,wrapperCol:o,label:"\u624b\u673a\u53f7"},t.getFieldDecorator("mobile",{initialValue:u.mobile,rules:[{required:!0,message:"\u4e0d\u662f\u6709\u6548\u7684\u624b\u673a\u53f7\uff01",len:11}]})(M.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165"}))),M.default.createElement(q,{labelCol:i,wrapperCol:o,label:"\u6027\u522b"},t.getFieldDecorator("gender",{initialValue:u.gender,rules:[{required:!0,message:"\u6027\u522b\u4e0d\u80fd\u4e3a\u7a7a\uff01"}]})(M.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},Object.keys(d).map(function(e){return M.default.createElement(R,{key:e},d[e])})))),M.default.createElement(q,{labelCol:{span:5},wrapperCol:{span:15},label:"\u751f\u65e5"},t.getFieldDecorator("birthday",{initialValue:(0,O.default)(u.birthday)})(M.default.createElement(y.default,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u751f\u65e5"}))),M.default.createElement(q,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7528\u6237\u7b49\u7ea7"},t.getFieldDecorator("userLevelId",{initialValue:u.userLevelId+"",rules:[{required:!0,message:"\u9700\u8981\u7528\u6237\u7b49\u7ea7\uff01"}]})(M.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},Object.keys(n).map(function(e){return M.default.createElement(R,{key:e},n[e])})))))}}]),t}(M.PureComponent))||V),T=(k=(0,D.connect)(function(e){var t=e.user1,a=e.loading;return{user1:t,extra:t.data.extra,loading:a.models.user1}}),L=x.default.create(),k(S=L(S=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,r=new Array(l),d=0;d<l;d++)r[d]=arguments[d];return a=(0,b.default)(this,(e=(0,E.default)(t)).call.apply(e,[this].concat(r))),a.state={modalVisible:!1,updateModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},updateFormValues:{}},a.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u624b\u673a\u53f7\u7801",dataIndex:"mobile"},{title:"\u6027\u522b",dataIndex:"gender",render:function(e,t){var l=a.props.user1.data.extra.gender;return l[e]}},{title:"\u751f\u65e5",dataIndex:"birthday",render:function(e){return M.default.createElement("span",null,(0,O.default)(e).format("YYYY-MM-DD"))}},{title:"\u7528\u6237\u7b49\u7ea7",dataIndex:"userLevelId",render:function(e,t){var l=a.props.user1.data.extra.userLevel;return l[e]}},{title:"\u64cd\u4f5c",render:function(e,t){return M.default.createElement(M.Fragment,null,M.default.createElement("a",{onClick:function(){return a.handleUpdateModalVisible(!0,t)}},"\u4fee\u6539"),M.default.createElement(f.default,{type:"vertical"}),M.default.createElement("a",{onClick:function(){return a.handleDeleteUser([t.id])}},"\u5220\u9664"))}}],a.handleStandardTableChange=function(e,t,l){var r=a.props.dispatch,d=a.state.formValues,n=(0,m.default)({pageNum:e.current,pageSize:e.pageSize},d);l.field&&(n.sorter="".concat(l.field,"_").concat(l.order)),r({type:"user1/list",payload:n})},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch;t.resetFields(),a.setState({formValues:{}}),l({type:"user1/list",payload:{}})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,r=t.form;r.validateFields(function(e,t){e||(a.setState({formValues:t}),l({type:"user1/list",payload:values}))})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleUpdateModalVisible=function(e,t){a.setState({updateModalVisible:!!e,updateFormValues:t||{}})},a.handleCreateUser=function(e){var t=a.props.dispatch;t({type:"user1/create",payload:e,callback:function(e){c.default.success(e.msg),a.handleModalVisible(),t({type:"user1/list"})}})},a.handleUpdate=function(e){var t=a.props.dispatch;t({type:"user1/update",payload:e,callback:function(e){c.default.success(e.msg),a.handleUpdateModalVisible(),t({type:"user1/list"})}})},a.handleDeleteUser=function(e){var t=a.props.dispatch;t({type:"user1/delete",payload:e,callback:function(e){c.default.success(e.msg),t({type:"user1/list"}),a.setState({selectedRows:[]})}})},a}return(0,v.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"user1/list"})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return M.default.createElement(x.default,{onSubmit:this.handleSearch,layout:"inline"},M.default.createElement(u.default,{gutter:{md:8,lg:24,xl:48}},M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(q,{label:"\u7528\u6237\u540d"},e("username")(M.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165"})))),M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(q,{label:"\u624b\u673a\u53f7"},e("mobile")(M.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165"})))),M.default.createElement(o.default,{md:8,sm:24},M.default.createElement("span",{className:I.default.submitButtons},M.default.createElement(i.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),M.default.createElement(i.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),M.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u5c55\u5f00 ",M.default.createElement(s.default,{type:"down"}))))))}},{key:"renderAdvancedForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.user1.data.extra,l=a.gender,r=a.userLevel;return M.default.createElement(x.default,{onSubmit:this.handleSearch,layout:"inline"},M.default.createElement(u.default,{gutter:{md:8,lg:24,xl:48}},M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(q,{label:"\u7528\u6237\u540d"},t("username")(M.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165"})))),M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(q,{label:"\u624b\u673a\u53f7"},t("mobile")(M.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165"})))),M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(q,{label:"\u6027\u522b"},t("gender")(M.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},Object.keys(l).map(function(e){return M.default.createElement(R,{key:e},l[e])})))))),M.default.createElement(u.default,{gutter:{md:8,lg:24,xl:48}},M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(q,{label:"\u7528\u6237\u7ea7\u522b"},t("userLevelId")(M.default.createElement(w.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},Object.keys(r).map(function(e){return M.default.createElement(R,{key:e},r[e])})))))),M.default.createElement("div",{style:{overflow:"hidden"}},M.default.createElement("div",{style:{float:"right",marginBottom:24}},M.default.createElement(i.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),M.default.createElement(i.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),M.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u6536\u8d77 ",M.default.createElement(s.default,{type:"up"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.user1.data,l=t.loading,r=t.user1.data.extra,u=r.gender,s=r.userLevel,o=this.state,c=o.selectedRows,f=o.modalVisible,m=o.updateModalVisible,p=o.updateFormValues,h={handleCreateUser:this.handleCreateUser,handleModalVisible:this.handleModalVisible,gender:u,userLevel:s},b={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate,gender:u,userLevel:s};return M.default.createElement(j.default,{title:"\u7528\u6237\u7ba1\u7406"},M.default.createElement(n.default,{bordered:!1},M.default.createElement("div",{className:I.default.tableList},M.default.createElement("div",{className:I.default.tableListForm},this.renderForm()),M.default.createElement("div",{className:I.default.tableListOperator},M.default.createElement(i.default,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"\u65b0\u5efa"),c.length>0&&M.default.createElement("span",null,M.default.createElement(i.default,{onClick:function(){return e.handleDeleteUser(c.map(function(e){return e.id}))}},"\u5220\u9664"))),M.default.createElement(U.default,{selectedRows:c,loading:l,data:a,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),M.default.createElement(N,(0,d.default)({},h,{modalVisible:f})),p&&Object.keys(p).length?M.default.createElement(P,(0,d.default)({},b,{updateModalVisible:m,values:p})):null)}}]),t}(M.PureComponent))||S)||S),Y=T;t.default=Y}}]);